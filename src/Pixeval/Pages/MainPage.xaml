<Page x:Class="Pixeval.Pages.MainPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:animatedVisuals="using:Microsoft.UI.Xaml.Controls.AnimatedVisuals"
      xmlns:ie="using:Microsoft.Xaml.Interactions.Core"
      xmlns:i="using:Microsoft.Xaml.Interactivity"
      xmlns:pages="using:Pixeval.Pages"
      xmlns:viewModels="using:Pixeval.ViewModels"
      xmlns:utils="using:Pixeval.Utils"
      xmlns:ui="using:CommunityToolkit.WinUI.UI"
      Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
                       NavigationCacheMode="Required"
                       mc:Ignorable="d">
    <Page.Resources>
        <DataTemplate x:Name="IllustrationHeaderSuggestionTemplate">
            <TextBlock x:Uid="/MainPage/IllustrationHeaderSuggestionTextBlock"
                       FontSize="{StaticResource PixevalContentFontSize}"
                       FontWeight="Bold" />
        </DataTemplate>

        <DataTemplate x:Name="NovelHeaderSuggestionTemplate">
            <TextBlock x:Uid="/MainPage/NovelHeaderSuggestionTextBlock"
                       FontSize="{StaticResource PixevalContentFontSize}"
                       FontWeight="Bold" />
        </DataTemplate>
    </Page.Resources>
    <NavigationView x:Name="MainPageNavigationView"
                    d:DataContext="{d:DesignInstance viewModels:MainPageViewModel}"
                    IsBackButtonVisible="Collapsed"
                    IsSettingsVisible="False"
                    PaneTitle="Pixeval"
                    SelectedItem="{x:Bind ViewModel.SelectedItem}">
        <i:Interaction.Behaviors>
            <ie:EventTriggerBehavior EventName="SelectionChanged">
                <ie:InvokeCommandAction></ie:InvokeCommandAction>
            </ie:EventTriggerBehavior>
        </i:Interaction.Behaviors>
        <NavigationView.PaneCustomContent>
            <Grid Margin="15,5,15,10" >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition Width="38" />
                    <ColumnDefinition Width="38" />
                </Grid.ColumnDefinitions>
                <AutoSuggestBox x:Uid="/MainPage/MainPageAutoSuggestionBox"
                                x:Name="MainPageAutoSuggestBox"
                                x:FieldModifier="public"
                                Grid.Column="0"
                                VerticalAlignment="Center"
                                AllowDrop="True"
                                Text="{x:Bind ViewModel.SuggestBoxText}"
                                IsSuggestionListOpen="{x:Bind ViewModel.IsSuggestionListOpen}"
                                QueryIcon="Find">
                    <ie:EventTriggerBehavior EventName="GotFocus">
                        <ie:InvokeCommandAction></ie:InvokeCommandAction>
                    </ie:EventTriggerBehavior>
                    <ie:EventTriggerBehavior EventName="QuerySubmitted">
                        <ie:InvokeCommandAction></ie:InvokeCommandAction>
                    </ie:EventTriggerBehavior>
                    <ie:EventTriggerBehavior EventName="SuggestionChosen">
                        <ie:InvokeCommandAction></ie:InvokeCommandAction>
                    </ie:EventTriggerBehavior>
                    <ie:EventTriggerBehavior EventName="TextChanged">
                        <ie:InvokeCommandAction></ie:InvokeCommandAction>
                    </ie:EventTriggerBehavior>
                    <ie:EventTriggerBehavior EventName="KeyDown">
                        <ie:InvokeCommandAction></ie:InvokeCommandAction>
                    </ie:EventTriggerBehavior>
                    <AutoSuggestBox.ItemContainerTransitions>
                        <TransitionCollection>
                            <AddDeleteThemeTransition />
                        </TransitionCollection>
                    </AutoSuggestBox.ItemContainerTransitions>

                </AutoSuggestBox>
                <Button x:Uid="/MainPage/OpenSearchSettingPopupButton"
                        Grid.Column="1"
                        Width="33"
                        Height="33"
                        Padding="0"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Center"
                        Content="{ui:FontIcon Glyph=SettingE713, FontSize=13}"/>
                <Button x:Uid="/MainPage/ReverseSearchButton"
                        Grid.Column="2"
                        Width="33"
                        Height="33"
                        Padding="0"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Center">
                    <AnimatedIcon Width="18" Height="18">
                        <AnimatedIcon.Source>
                            <animatedVisuals:AnimatedFindVisualSource />
                        </AnimatedIcon.Source>
                        <AnimatedIcon.FallbackIconSource>
                            <SymbolIconSource Symbol="Find" />
                        </AnimatedIcon.FallbackIconSource>
                    </AnimatedIcon>
                </Button>
            </Grid>
        </NavigationView.PaneCustomContent>
        <NavigationView.MenuItems>
            <NavigationViewItem x:Uid="/MainPage/RecommendationsTab"
                                Icon="{ui:FontIcon Glyph=CalendarE787}"
                                Tag="Recommendations"/>
            <NavigationViewItem x:Uid="/MainPage/RankingsTab"
                                Icon="{ui:FontIcon Glyph=MarketEAFC}"
                                Tag="Rankings"/>
            <NavigationViewItem x:Uid="/MainPage/BookmarksTab"
                                Icon="{ui:FontIcon Glyph=LibraryE8F1}"
                                Tag="Bookmarks"/>
            <NavigationViewItem x:Uid="/MainPage/FollowingsTab"
                                Icon="{ui:FontIcon Glyph=PeopleE716}"
                                Tag="Followings"/>
            <NavigationViewItem x:Uid="/MainPage/SpotlightsTab"
                                Icon="{ui:FontIcon Glyph=MapLayersE81E}"
                                Tag="Spotlights"/>
            <NavigationViewItem x:Uid="/MainPage/FeedsTab" 
                                Icon="{ui:FontIcon Glyph=MobLocationEC43}"
                                Tag="Feeds"/>
            <NavigationViewItem x:Uid="/MainPage/RecentPostsTab"
                                Icon="{ui:FontIcon Glyph=DevUpdateECC5}"
                                Tag="RecentPosts"/>
            <NavigationViewItemHeader x:Uid="/MainPage/DownloadAndHistoriesTab" />
            <NavigationViewItem x:Uid="/MainPage/HistoriesTab"
                                Icon="{ui:FontIcon Glyph=HistoryE81C}"
                                Tag="Histories"/>
            <NavigationViewItem x:Name="DownloadsTab"
                                x:FieldModifier="public"
                                x:Uid="/MainPage/DownloadsTab"
                                Icon="{ui:FontIcon Glyph=CheckListE9D5}"/>
        </NavigationView.MenuItems>
        <NavigationView.FooterMenuItems>
            <NavigationViewItem x:Uid="/MainPage/HelpTab" Icon="{ui:FontIcon Glyph=HelpE897}" />
            <NavigationViewItem x:Uid="/MainPage/AboutTab"
                                Icon="{ui:FontIcon Glyph=RingerBadge12EDAC}" />
            <NavigationViewItem x:Name="SettingsTab"
                                x:Uid="/MainPage/SettingsTab">
                <NavigationViewItem.Icon>
                    <AnimatedIcon>
                        <AnimatedIcon.Source>
                            <animatedVisuals:AnimatedSettingsVisualSource />
                        </AnimatedIcon.Source>
                        <AnimatedIcon.FallbackIconSource>
                            <SymbolIconSource Symbol="Setting" />
                        </AnimatedIcon.FallbackIconSource>
                    </AnimatedIcon>
                </NavigationViewItem.Icon>
            </NavigationViewItem>
        </NavigationView.FooterMenuItems>
        <Frame x:Name="MainFrame" />
    </NavigationView>
</Page>